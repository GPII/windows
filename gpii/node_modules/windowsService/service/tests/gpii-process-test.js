/* Tests for gpii-process.js
 *
 * Copyright 2017 Raising the Floor - International
 *
 * Licensed under the New BSD license. You may not use this file except in
 * compliance with this License.
 *
 * The R&D leading to these results received funding from the
 * Department of Education - Grant H421A150005 (GPII-APCP). However,
 * these results do not necessarily represent the policy of the
 * Department of Education, and you should not assume endorsement by the
 * Federal Government.
 *
 * You may obtain a copy of the License at
 * https://github.com/GPII/universal/blob/master/LICENSE.txt
 */

"use strict";

var jqUnit = require("node-jqunit"),
    net = require("net"),
    path = require("path"),
    gpiiProcess = require("../src/gpii-ipc.js"),
    winapi = require("../src/winapi.js");

var teardowns = [];

jqUnit.module("GPII pipe tests", {
    teardown: function () {
        while (teardowns.length) {
            teardowns.pop()();
        }
    }
});

jqUnit.test("Test isProcessRunning", function () {
    // Check a process known to be running.
    var running = gpiiProcess.isProcessRunning(process.pid);
    jqUnit.assertTrue("This process should be detected as running", running);

    // Check a processes known not to be running.
    running = gpiiProcess.isProcessRunning(-1);
    jqUnit.assertFalse("Process ID -1 should be detected as not running", running);
});
