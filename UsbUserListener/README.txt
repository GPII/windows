GPII USB User Listener for Windows

This folder contains the necessary files for the Windows USB listener (source code and libraries).

Installation instructions:
1. Make sure you have MinGW installed.
2. Copy lib/libcurl.dll to a folder on your system's PATH
3. Build and link with MinGW g++ with the following options:
g++ -I.\include -O0 -g3 -Wall -c -fmessage-length=0 -fpermissive -o src\UsbUserListener.o ..\src\UsbUserListener.cpp
g++ -L.\lib -static-libgcc -o UsbUserListener.exe src\UsbUserListener.o -lcurldll
You might need to use the absolute path to the include and lib folders. You need to pay specific attention to the -fpermissive, -I, -L, -static-libgcc and -lcurldll flags. The others were auto-generated by Eclipse CDT, so they might differ on your platform - feel free to omit or change them.
4. When the application is run, you should be able to see UsbUserListener.exe in the task manager. Fire up the Flow Manager to see requests coming upon insertion or removal of USB sticks.

Build flags:
-fpermissive avoids a build error because of a conversion of char to LPVOID (needed when a new thread is created for reading the token).
-I, -L and -l specify the include path for curl/curl.h and the libcurldll.a library
-static-libgcc is needed for the application to run. If ommitted, the application terminates immediately (http://www.eclipse.org/forums/index.php/mv/tree/156519/#page_top)

Dependencies (you might need this for automating the build):
1. MinGW - download and install from http://www.mingw.org
2. libcurl - download from http://curl.haxx.se/download.html and follow installation instructions for Windows (http://curl.haxx.se/docs/install.html)
3. When building the project, you need to link to the libcurldll.a file generated in step 2.